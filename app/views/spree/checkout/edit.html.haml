= javascript_include_tag 'spree/frontend/checkout'

#checkout.container(data-hook)
  = render partial: 'spree/shared/error_messages', locals: { target: @order }

  .row(data-hook="checkout_header")
    %h1(class="columns three alpha" data-hook="checkout_title")= t('spree.checkout')
    %div(class="columns thirteen omega" data-hook="checkout_progress")= checkout_progress

  .row(data-hook="checkout_content")
    %div(class="columns #{@order.state != 'confirm' ? 'alpha twelve' : 'alpha omega sixteen'}" data-hook="checkout_form_wrapper")
      = form_for @order, url: update_checkout_path(@order.state), html: { id: "checkout_form_#{@order.state}" } do |form|
        - if @order.state == 'address' || !@order.email?
          %div(class="field field-required" style='clear: both')
            = form.label :email
            %br/
            = form.email_field :email, required: true
        = render @order.state, form: form
    - if @order.state != 'confirm'
      #checkout-summary(data-hook="checkout_summary_box" class="columns omega four")
        = render partial: 'summary', locals: { order: @order }

:javascript
  Spree.current_order_id = "#{ @order.number }";
  Spree.current_order_token = "#{ @order.guest_token }";
