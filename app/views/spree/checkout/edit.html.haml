= javascript_include_tag 'spree/frontend/checkout'

- content_for :footer_extra do
  = stylesheet_link_tag 'font-awesome.min.css'

#checkout-container.container.d-flex(data-hook)
  = render partial: 'spree/shared/error_messages', locals: { target: @order }
  .col-md-8.col-lg-8.pd-m-0
    .row(data-hook="checkout_header")
      -# %h1(class="columns three alpha" data-hook="checkout_title")= t('spree.checkout')
      -#%div(class="columns thirteen omega checkout-header" data-hook="checkout_progress")= checkout_progress
      .columns.thirteen.omega.checkout-header
        %ol.progress-steps
          %li 
            = content_tag('span', link_to('Shipping', '#shipping'))
          %li 
            = content_tag('span', link_to('Payment', '#payment'))
          %li 
            = content_tag('span', link_to('Review', '#review'))
          %li 
            = content_tag('span', link_to('Order Confirmed', '#confirm'))
    .row(data-hook="checkout_content")
      %div(class="checkout-form-wrapper w-100 columns #{@order.state != 'confirm' ? 'alpha twelve' : 'alpha omega sixteen'}" data-hook="checkout_form_wrapper")
        = form_for @order, url: update_checkout_path(@order.state), html: { id: "checkout_form_#{@order.state}" } do |form|
          = hidden_field_tag(:order_id, @order.id)
          #shipping.box-shadow
            .box-body
              %h6='Shipping Information'
              .contact
                %label{:for => "full_name"}='Full Name'
                .d-flex
                  .col-md-6.pdl-0
                    %input.form-control{:id => "full_name", :placeholder => "Full Name"}
                  .phone.d-flex.col-md-6.pdr-0.pdl-0
                    %input.form-control.col-md-2{:id => "prefix", :value => "+1", :size => "4"}
                    %input.form-control{:id => "mobile", :placeholder => "Mobile", :size => "12"}
              .address
                %label{:for => "address"}='Address'
                .d-flex
                  .col-md-6.pdl-0
                    %input.form-control{:id => "street", :placeholder => "Street"}
                  .col-md-6.pdr-0.pdl-0
                    %input.form-control{:id => "apartment", :placeholder => "Apartment Or Unit"}
                .d-flex
                  .col-md-4.pdl-0
                    %input.form-control{:id => "country", :placeholder => "Street"}
                  .col-md-4.pdl-0
                    %input.form-control{:id => "state", :placeholder => "Apartment Or Unit"}
                  .col-md-4.pdr-0.pdl-0
                    %input.form-control{:id => "city", :placeholder => "Apartment Or Unit"}
                .d-flex
                  .col-md-3.pdl-0
                    %input.form-control{:id => "zipcode", :placeholder => "Zipcode"}
              .submit
                .d-flex
                  .col-md-4.pdl-0
                    %a#confirm_address.btn.btn-bg-black{:href => "#"}='Confirm Address'
                  .col-md-5.pdl-0.mt-1
                    .checkbox.mt-4
                      %label
                        %input#same_billing{:type => "checkbox", :checked => "checked"}
                          %span.cr
                            %i.cr-icon.fa.fa-check
                        Same as billing address
          #billing.box-shadow.mt-4{:style => "display:none;"}
            .box-body
              %h6='Billing Information'
              .contact
                %label{:for => "full_name"}='Full Name'
                .d-flex
                  .col-md-6.pdl-0
                    %input.form-control{:id => "full_name", :placeholder => "Full Name"}
                  .phone.d-flex.col-md-6.pdr-0.pdl-0
                    %input.form-control.col-md-2{:id => "prefix", :value => "+1", :size => "4"}
                    %input.form-control{:id => "mobile", :placeholder => "Mobile", :size => "12"}
              .address
                %label{:for => "address"}='Address'
                .d-flex
                  .col-md-6.pdl-0
                    %input.form-control{:id => "street", :placeholder => "Street"}
                  .col-md-6.pdr-0.pdl-0
                    %input.form-control{:id => "apartment", :placeholder => "Apartment Or Unit"}
                .d-flex
                  .col-md-4.pdl-0
                    %input.form-control{:id => "country", :placeholder => "Street"}
                  .col-md-4.pdl-0
                    %input.form-control{:id => "state", :placeholder => "Apartment Or Unit"}
                  .col-md-4.pdr-0.pdl-0
                    %input.form-control{:id => "city", :placeholder => "Apartment Or Unit"}
                .d-flex
                  .col-md-3.pdl-0
                    %input.form-control{:id => "zipcode", :placeholder => "Zipcode"}

          -# if @order.state == 'address' || !@order.email?
            -#%div(class="field field-required" style='clear: both')
              -#= form.label :email
              -#%br/
              -#= form.email_field :email, required: true
          -#= render @order.state, form: form
  .col-md-4.col-lg-4.pd-m-0
    - if @order.state != 'confirm'
      #checkout-summary(data-hook="checkout_summary_box" class="cart-summary box-shadow box-body make-me-sticky")
        = render partial: 'summary', locals: { order: @order }

:javascript
  Spree.current_order_id = "#{ @order.number }";
  Spree.current_order_token = "#{ @order.guest_token }";
