:ruby
  @variant ||= resource
  @product ||= @variant.product if @variant

/ Main Content Wrapper Start
- cache [I18n.locale, current_pricing_options, @variant] do
  %div{"data-hook" => "product_show"}>
  .container
    .container.mb-12
    #content.main-content-wrapper
      .page-content-inner.enable-full-width
        #wrapper.row{"data-hook" => "product_left_part_wrap"}
          .content-section.col-5
            / ############## GALLERY SECTIONS ############
            .product-main-image
              .product-image{"data-hook" => "product_images"}
                .product-gallery
                  .product-gallery__large-image
                    %figure.product-gallery__image
                      = render partial: 'variant_gallery', locals: { variant: @variant }
                    %figure.product-gallery__image
                      = render partial: 'variant_gallery', locals: { variant: @variant }
                    /
                      <div class="product-gallery__actions">
                      <button class="action-btn btn-zoom-popup"><i class="dl-icon-zoom-in"></i></button>
                      <a href="https://www.youtube.com/watch?v=Rp19QD2XIGM" class="action-btn video-popup"><i class="dl-icon-format-video"></i></a>
                      </div>
                  #thumbnails
                  / = render partial: 'thumbnails'
            / ############## END GALLERY SECTION ############
          .col-7
            .make-me-sticky
              / ############## SIDEBAR SECTIONS ############
              .product-summary.mt--40.mt-md--10.mt-sm--30
                .padding-top-2x.mt-2.hidden-md-up
                .sp-categories.pb-3
                  %i.icon-tag
                  %a{:href => "#"} Drones,
                  %a{:href => "#"} Action cameras
                %h2.mb-3= @variant.name
                %span.h3.d-block
                  %del.text-muted= @variant.price
                  = @variant.price
                %p.text-muted
                  = product_description(@variant) rescue t('spree.product_has_no_description')
                  %a.scroll-to{:href => "#details"} More info
                .row.margin-top-1x
                  .col-sm-6
                    .form-group
                      %label{:for => "size"} Choose color
                      %select#size.form-control
                        %option White/Gray/Black
                        %option Black
                        %option Black/White/Red
                  .col-sm-6
                    .form-group
                      %label{:for => "color"} Battery capacity
                      %select#color.form-control
                        %option 5100 mAh
                        %option 6200 mAh
                        %option 8000 mAh
                .row.align-items-end.pb-4
                  .col-sm-4
                    .form-group.mb-0
                      %label{:for => "quantity"} Quantity
                      %select#quantity.form-control
                        %option 1
                        %option 2
                        %option 3
                        %option 4
                        %option 5
                  .col-sm-8
                    .pt-4.hidden-sm-up
                    = succeed "data-toast-type=\"success\"" do
                      %button.btn.btn-primary.btn-block.m-0
                    %i.icon-bag
                    Add to Cart
              .pt-1.mb-4
                %span.text-medium SKU:
                \#21457832
              %hr.mb-2
                .d-flex.flex-wrap.justify-content-between
                  .mt-2.mb-2
                    %button.btn.btn-outline-secondary.btn-sm.btn-wishlist
                      %i.icon-heart>
                      To Wishlist
                    %button.btn.btn-outline-secondary.btn-sm.btn-compare
                      %i.icon-repeat>
                      Compare
                  .mt-2.mb-2
                    %span.text-muted Share:
                    .d-inline-block
                      %a.social-button.shape-rounded.sb-facebook{"data-placement" => "top", "data-toggle" => "tooltip", :href => "#", :title => "Facebook"}
                        %i.socicon-facebook
                      %a.social-button.shape-rounded.sb-twitter{"data-placement" => "top", "data-toggle" => "tooltip", :href => "#", :title => "Twitter"}
                        %i.socicon-twitter
                      %a.social-button.shape-rounded.sb-instagram{"data-placement" => "top", "data-toggle" => "tooltip", :href => "#", :title => "Instagram"}
                        %i.socicon-instagram
                      %a.social-button.shape-rounded.sb-google-plus{"data-placement" => "top", "data-toggle" => "tooltip", :href => "#", :title => "Google +"}
                        %i.socicon-googleplus
              #cart-form{"data-hook" => "cart_form"}
              /  = render partial: 'cart_form'
              / ############## END SIDEBAR SECTION ############
          / ############## Anything after the sidebar --- description etc. ############
  #details.bg-secondary.padding-top-3x.padding-bottom-2x.mb-3.mt-40
    .container
      .row
        .col-md-6
          %h3.h4 Details
          %p.mb-4
            = product_description(@variant) rescue t('spree.product_has_no_description')
        .col-md-6
          %div{"data-hook" => "product_properties"}
          /  = render partial: 'properties'
          %div{"data-hook" => "promotions"}
          /  = render partial: 'promotions'
